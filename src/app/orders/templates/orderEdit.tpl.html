<article class="container-fluid">
    <h3 class="page-header">
        <b>Edit {{orderEdit.order.Type}} Order:</b> {{orderEdit.orderID}}
    </h3>
    <form name="EditForm" ng-submit="orderEdit.Submit()">
        <div class="row">
            <div class="form-group col-sm-6">
                <label for="orderIDInput">Order ID</label>
                <input id="orderIDInput" type="text" class="form-control" ng-model="orderEdit.order.ID" required/>
            </div>
            <div class="form-group col-sm-3">
                <label for="orderShippingCostInput">Shipping Cost</label>
                <input id="orderShippingCostInput" type="number" step="any" class="form-control" ng-model="orderEdit.order.ShippingCost"/>
            </div>
            <div class="form-group col-sm-3">
                <label for="orderTaxCostInput">Tax Cost</label>
                <input id="orderTaxCostInput" type="number" step="any" class="form-control" ng-model="orderEdit.order.TaxCost"/>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-3">
                <label for="orderFromUserInput">From User</label>
                <input id="orderFromUserInput" type="text" class="form-control" ng-model="orderEdit.order.FromUserID" disabled/>
            </div>
            <div class="form-group col-sm-3">
                <label for="orderBillAddInput">Billing Address ID</label>
                <input
                        id="orderBillAddInput"
                        type="text"
                        class="form-control"
                        ng-model="orderEdit.order.BillingAddressID"
                        uib-typeahead="address.ID as address.AddressName for address in orderEdit.billingAddressTypeAhead($viewValue, orderEdit.order.FromUserID)"
                        />
            </div>
            <div class="form-group col-sm-3">
                <label for="orderShipAddInput">Shipping Address ID</label>
                <input
                        id="orderShipAddInput"
                        type="text"
                        class="form-control"
                        ng-model="orderEdit.order.ShippingAddressID"
                        uib-typeahead="address.ID as address.AddressName for address in orderEdit.shippingAddressTypeAhead($viewValue)"
                        />
            </div>
            <div class="form-group col-sm-3">
                <label for="orderSpendingAccountInput">Spending Account ID</label>
                <input
                        id="orderSpendingAccountInput"
                        type="text"
                        class="form-control"
                        ng-model="orderEdit.order.SpendingAccountID"
                        uib-typeahead="spendingAccount.ID as spendingAccount.Name for spendingAccount in orderEdit.spendingAccountTypeAhead($viewValue)"
                        />
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-3">
                <label for="orderPaymentTypeInput">Payment Method</label>
                <select id="orderPaymentTypeInput" class="form-control" ng-model="orderEdit.order.PaymentMethod">
                    <option value="PurchaseOrder">Purchase Order</option>
                    <option value="CreditCard">Credit Card</option>
                    <option value="BudgetAccount">Spending Account</option>
                    <option value="PayPalExpressCheckout">Pay Pal Express Checkout</option>
                </select>
            </div>
            <div class="form-group col-sm-3">
                <label for="orderSavedCCInput">Saved Credit Card ID</label>
                <input id="orderSavedCCInput" type="text" class="form-control" ng-model="orderEdit.order.SavedCreditCardID"/>
            </div>
            <div class="form-group col-sm-6">
                <label for="orderCommentsInput">Order Comments:</label>
                <textarea id="orderCommentsInput" type="text" step="any" class="form-control" ng-model="orderEdit.order.Comments"></textarea>
            </div>
        </div>
        <div ng-if="orderEdit.list.Items.length">
            <h4>
                Line Items
            </h4>
            <section class="table-fixed-header">
                <div class="table-header-bg"></div>
                <div class="table-container" ordercloud-infinite-scroll controlleras="orderEdit">
                    <table class="table table-hover">
                        <colgroup>
                            <col class="action-column"/>
                        </colgroup>
                        <thead>
                        <tr>
                            <th></th>
                            <th>
                                <div>ID</div>
                            </th>
                            <th>
                                <div>Product ID</div>
                            </th>
                            <th>
                                <div>Unit Price</div>
                            </th>
                            <th>
                                <div>Quantity</div>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="li in orderEdit.list.Items track by $index">
                            <td class="text-center">
                                <i class="fa fa-trash text-danger fa-2x text-danger" ng-if="orderEdit.order.Status == 'Open' || 'Unsubmitted'" ng-click="$event.stopPropagation(); orderEdit.deleteLineItem(li)"></i>
                            </td>
                            <td>
                                {{li.ID}}
                            </td>
                            <td>
                                <a href="" ng-click="orderEdit.goToProduct(li)">{{li.ProductID}}</a>
                            </td>
                            <td><input type="number" name="{{'Quantity' + $index}}" ng-model="li.Quantity" class="form-control" /></td>
                            <td><input type="number" name="{{'UnitPrice' + $index}}" ng-model="li.UnitPrice" class="form-control" /></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
        <div class="well well-lg text-center">
            <b>This order does not have any line items</b>
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-primary" ng-disabled="OrderEditForm.$invalid">Save</button>
            <button type="button" class="btn btn-default" ui-sref="^.orders">Cancel</button>
            <button type="button" class="btn btn-default" ng-if="orderEdit.order.Status == 'Open' || 'Unsubmitted'" ng-click="orderEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>
        </div>
    </form>
</article>